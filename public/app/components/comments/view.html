<div class="post__content-wrapper">
  <div class="comments">    
    <comment-input-box
    	on-submit="Comments.onSubmitComment.bind(Comments)"
    	parentid="none"
    	placeholder="Write a comment..."
    	postid="{{ Comments.PostService.post.id }}"
    	update="false">
    </comment-input-box>
    
    <div
      class="comments__text-wrapper comments__text-wrapper--bg"
      ng-if="Comments.isCommentPermalink()">
      <p class="comments__text">
      	You are viewing a single comment's thread. <a ng-if="Comments.PostService.post.type !== 'poll'" ui-sref="weco.branch.post({ postid: Comments.PostService.post.id })"><a ng-if="Comments.PostService.post.type === 'poll'" ui-sref="weco.branch.post.discussion({ postid: Comments.PostService.post.id})">View all comments</a>
      </p>
    </div>

    <dropdown
      class="style--horizontal"
      items="Comments.sortBy"
      ng-if="!Comments.isCommentPermalink()"
    	selected="Comments.controls.sortBy.selectedIndex"
    	title="Comments.controls.sortBy.title">
    </dropdown>

    <loader-bar hidden="!Comments.isLoading"></loader-bar>

    <div
      class="empty-wrapper"
      ng-if="!Comments.isCommentPermalink() && !Comments.comments.length">
      <p class="empty__text">
        No comments yet!
      </p>
    </div>

    <div class="comments__wrapper">
      <comment-thread
        comments="Comments.comments"
        ng-if="Comments.comments.length > 0"
      	sort-by="Comments.controls.sortBy.items[Comments.controls.sortBy.selectedIndex]">
      </comment-thread>
      <span
        class="comments__text text--uppercase ng-hide"
        ng-click="Comments.getComments(Comments.comments[Comments.comments.length - 1].id)"
        ng-show="Comments.hasMoreComments">
        load more comments
      </span>
    </div>
  </div>
</div>
