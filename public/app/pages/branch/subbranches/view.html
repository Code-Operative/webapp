<div id="branch-subbranches">
  <div class="content-header">
    <img
      alt="Toggle sidebar"
      class="content--sidebar-toggle"
      ng-class="{ 'toggled': Navbar.AppService.isSidebarOpen }"
      ng-click="Navbar.AppService.toggleSidebar()"
      src="/assets/images/icons/black/show.png" />

    <h1 class="text--capitalize">
      {{ BranchSubbranches.BranchService.branch.id === 'root' ? 'root ' : 'child ' }}branches
    </h1>

    <div class="content-controls">
      <dropdown
        items="BranchSubbranches.controls.timeRange.items"
        selected="BranchSubbranches.controls.timeRange.selectedIndex"
        title="time range">
      </dropdown>

      <dropdown
        items="BranchSubbranches.controls.sortBy.items"
        selected="BranchSubbranches.controls.sortBy.selectedIndex"
        title="sort by">
      </dropdown>

      <div class="button">
        <a
          id="add-content"
          ng-class="{ 'disabled': !BranchSubbranches.WallService.canAddContent() }"
          ng-click="BranchSubbranches.WallService.addContent()"
          offset-y="40"
          text="BranchSubbranches.WallService.getAddContentTooltip()"
          tooltip>
        </a>
      </div>
    </div>
  </div>

  <div
    class="content-body"
    loading
    loading-when="!BranchSubbranches.branches.length && BranchSubbranches.isLoading"
    on-scroll-to-bottom="BranchSubbranchesScrollToBottom">
    <ul id="subbranch-list">
      <li class="list-item" ng-repeat="subbranch in BranchSubbranches.branches">
        <span class="list-item-index">
          {{ $index + 1 }}
        </span>
        
        <a class="list-item-image" ui-sref="weco.branch.wall({ branchid: subbranch.id })">
          <div style="background-image: url('{{ subbranch.profileUrlThumb }}'), url('/assets/images/default-branch.jpg');"></div>
        </a>
        
        <div class="list-item-info">
          <a ui-sref="weco.branch.wall({ branchid: subbranch.id })">
            <span class="list-item-title">
              {{ subbranch.name }}
            </span>
          </a>
          <span class="list-item-description">
            Created by <a ui-sref="weco.profile.about({ username: subbranch.creator })">{{ subbranch.creator }}</a> on {{ subbranch.date | date:'dd MMMM yyyy' }}
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
