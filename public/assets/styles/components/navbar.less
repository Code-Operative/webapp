.navbar {
  background: linear-gradient(to bottom, @primary-2, @primary-0);
  height: @navbar-h;
  left: 0;
  overflow-y: visible;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: @z-navbar;

  > .content,
  > ul {
    margin: 0 auto;
    max-width: @s-content-max-w;
    width: 100%;
  }

  > .content {
    display: flex;
    font-size: @font-size-xs;
    font-weight: @font-weight-extra-heavy;
    height: 100%;
    justify-content: space-between;
    position: relative;

    > div {
      display: flex;
      height: 100%;

      .logo {
        display: block;
        height: 100%;
        position: relative;

        > img {
          height: initial;
          max-height: calc(~'100% + 14px');
          max-width: 100%;

          &.animation {
            display: none;
            position: absolute;

            &[src] { display: block; }
          }

          .mediaQuery(@screen-sm, { max-height: calc(~'100% + 17px'); })
        }
      }

      .nav-controls {
        display: flex;
        height: 100%;

        > .navbar--item { width: @navbar-h; }
      }

      .navbar--item {
        align-items: center;
        cursor: pointer;
        display: flex;
        height: 100%;
        justify-content: center;
        position: relative;

        .navbar--icon {
          display: flex;
          height: 55%;
          justify-content: center;
          opacity: .5;
          padding: 0 6px;
        }

        .navbar--item--badge {
          background-color: @caution-1;
          border-radius: 50%;
          box-sizing: border-box;
          color: #fff;
          font-size: 9px;
          font-weight: 500;
          height: 18px;
          min-width: 18px;
          padding-top: 2px;
          position: absolute;
          right: -3px;
          text-align: center;
          top: -4px;

          &.ng-hide-add,
          &.ng-hide-remove {
            transition: transform .3s, opacity .3s;
          }

          &.ng-hide-add {
            opacity: 1;
            transform: scale(1);

            &.ng-hide-add-active {
              opacity: 0;
              transform: scale(0);
            }
          }

          &.ng-hide-remove {
            opacity: 0;
            transform: scale(0);

            &.ng-hide-remove-active {
              opacity: 1;
              transform: scale(1);
            }
          }
        }

        &:hover { background-color: rgba(255, 255, 255, .1); }

        &.opaque,
        &:hover {
          color: #fff !important;

          .navbar--icon { opacity: 1; }
        }
      }

      &.user-controls {
        color: @primary-6;
        display: flex;
        height: 100%;

        .navbar--item {
          border-left: 1px solid @primary-5;
          color: @primary-6;
          font-weight: @font-weight-extra-heavy;
          padding: 0 6px;

          &.item--notification {
            border-left-width: 0;

            .navbar--icon {
              position: relative;

              img { height: 100%; }
            }
          }

          span.text {
            font-size: 14px;
            margin: 0 8px;
          }

          &.item--profile {
            padding-left: 0;
            padding-right: 0;

            span.text { display: none; }

            .mediaQuery(@screen-sm, {
              padding-left: 6px;

              span.text { display: inline-block; }
            });
          }

          &.item--expand {
            border-left-width: 0;

            img {
              height: 50%;
              opacity: .5;

              &:hover { opacity: 1; }
            }

            ul {
              @padding: 10px;

              background-color: @primary-0;
              border-top: 1px solid #494949;
              box-shadow: @shadow-2;
              color: #fff;
              min-width: 200px;
              padding: @padding;
              position: absolute;
              right: -1px;
              top: 100%;
              width: auto;
              // Hide it under the cube.
              z-index: -1;

              li,
              a li {
                cursor: pointer;
                padding: 5px 10px;

                &#logout {
                  border-radius: 3px;
                  text-transform: uppercase;
                  
                  &:hover { background-color: @primary-5; }
                }

                &.followed-branch {
                  &#followed-branch-title { font-weight: @font-weight-normal; }
                  &:not(#followed-branch-title):hover { text-decoration: underline; }
                }
              }

              &.ng-hide-add,
              &.ng-hide-remove {
                transition: transform .3s, opacity .3s;
              }

              &.ng-hide-add {
                opacity: 1;
                transform: translateY(0);

                &.ng-hide-add-active {
                  opacity: 0;
                  transform: translateY(-100%);
                }
              }

              &.ng-hide-remove {
                opacity: 0;
                transform: translateY(-100%);

                &.ng-hide-remove-active {
                  opacity: 1;
                  transform: translateY(0);
                }
              }
            }
          }

          div#profile-picture {
            background-position: center;
            background-size: cover;
            border-right-width: 0;
            height: 100%;
            width: @navbar-h;
            
            .mediaQuery(@screen-sm, {
              border-right-width: 1px;
              margin-left: 6px;
            });
          }
        }

        .mediaQuery(@screen-sm, {
          border-right: 1px solid @primary-5;
        })
      }
    }

    .mediaQuery(@screen-md, { width: ~'calc(100% - 64px)'; });
  }
}
